<button th:fragment="button1(type,name)" th:text="${name}" class="btn btn-primary btn-hover-custom" th:type="${type}"
    style="font-weight: 700;"></button>

<a th:fragment="button2(link,name)" th:text="${name}" th:href="${link}" class="btn btn-primary btn-hover-custom"
    style="font-weight: 700;"></a>

<div style="display: flex; align-items: center; justify-content: center;" th:fragment="button3">
    <button type="button" class="btn btn-primary"
        style="height: 40px; width: 40px; display: flex; align-items: center; justify-content: center;"
        th:data-email="${autoevaluation.userRole.user.email}"
        onclick="sendEmail(this, this.getAttribute('data-email'))">
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="28" viewBox="0 0 25 28" fill="none">
            <path
                d="M24.505 19.3319C24.4013 19.2069 24.2994 19.0819 24.1994 18.9613C22.8244 17.2981 21.9925 16.2944 21.9925 11.5863C21.9925 9.14875 21.4094 7.14875 20.26 5.64875C19.4125 4.54062 18.2669 3.7 16.7569 3.07875C16.7375 3.06794 16.7201 3.05376 16.7056 3.03687C16.1625 1.21812 14.6763 0 13 0C11.3238 0 9.83815 1.21812 9.29502 3.035C9.28053 3.05127 9.26342 3.065 9.2444 3.07562C5.72065 4.52625 4.00815 7.30938 4.00815 11.5844C4.00815 16.2944 3.17752 17.2981 1.80127 18.9594C1.70127 19.08 1.5994 19.2025 1.49565 19.33C1.22765 19.6532 1.05785 20.0464 1.00634 20.4631C0.95484 20.8798 1.02379 21.3025 1.20502 21.6812C1.59065 22.4937 2.41252 22.9981 3.35065 22.9981H22.6563C23.59 22.9981 24.4063 22.4944 24.7931 21.6856C24.9752 21.3068 25.0448 20.8837 24.9937 20.4666C24.9426 20.0494 24.773 19.6556 24.505 19.3319ZM13 28C13.9032 27.9993 14.7893 27.7541 15.5644 27.2905C16.3395 26.827 16.9746 26.1622 17.4025 25.3669C17.4227 25.3288 17.4326 25.2861 17.4314 25.243C17.4302 25.1999 17.4179 25.1578 17.3956 25.1209C17.3733 25.084 17.3419 25.0534 17.3043 25.0322C17.2668 25.0111 17.2244 25 17.1813 25H8.82002C8.77685 24.9998 8.73438 25.0109 8.69673 25.032C8.65909 25.0532 8.62757 25.0837 8.60522 25.1206C8.58288 25.1576 8.57049 25.1997 8.56925 25.2428C8.56801 25.286 8.57797 25.3287 8.59815 25.3669C9.02598 26.1621 9.66106 26.8268 10.436 27.2904C11.211 27.7539 12.097 27.9992 13 28Z"
                fill="#FFFDFD" />
        </svg>
    </button>
    <script>
        function sendEmail(button, recipientEmail) {
            button.disabled = true;

            var jsonData = {
                "correo_destinatario": recipientEmail,
                "titulo_correo": "Recuerda que tienes una autoevaluación pendiente",
                "cuerpo_correo": "Recuerda que tienes una autoevaluación pendiente, ingresa a la plataforma para realizarla."
            };

            var url = 'https://correos-sw3.onrender.com/enviar_correo';

            var currentDomain = window.location.origin;

            fetch(url, {
                method: 'POST',
                headers: {
                    'Access-Control-Allow-Origin': currentDomain,
                    'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept',
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(jsonData),
            })
                .then(response => {
                    button.disabled = false;
                    if (response.ok) {
                        return response.json();
                    } else {
                        console.error('POST request failed');
                    }
                })
                .then(data => {
                    console.log(data);
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        }
    </script>


</div>